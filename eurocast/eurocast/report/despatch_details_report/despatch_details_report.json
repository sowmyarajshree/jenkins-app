{
 "add_total_row": 1,
 "creation": "2020-12-09 15:49:14.260357",
 "disable_prepared_report": 0,
 "disabled": 0,
 "docstatus": 0,
 "doctype": "Report",
 "idx": 0,
 "is_standard": "Yes",
 "modified": "2021-01-20 15:33:47.011170",
 "modified_by": "Administrator",
 "module": "Eurocast",
 "name": "Despatch Details Report",
 "owner": "Administrator",
 "prepared_report": 0,
 "query": "SELECT\n\tt2.customer as 'Customer:Data:150',\n\tt2.item_code as 'Item Code:Data:100',\n\tt2.item_name as 'Item Name:Data:150',\n\tt2.qty as 'Plan or Actual Qty:Data:100',\n\t(SUM(t2.d1)+\n\tSUM(t2.d2)+\n\tSUM(t2.d3)+\n\tSUM(t2.d4)+\n\tSUM(t2.d5)+\n\tSUM(t2.d6)+\n\tSUM(t2.d7)+\n\tSUM(t2.d8)+\n\tSUM(t2.d9)+\n\tSUM(t2.d10)+\n\tSUM(t2.d11)+\n\tSUM(t2.d12)+\n\tSUM(t2.d13)+\n\tSUM(t2.d14)+\n\tSUM(t2.d15)+\n\tSUM(t2.d16)+\n\tSUM(t2.d17)+\n\tSUM(t2.d18)+\n\tSUM(t2.d19)+\n\tSUM(t2.d20)+\n\tSUM(t2.d21)+\n\tSUM(t2.d22)+\n\tSUM(t2.d23)+\n\tSUM(t2.d24)+\n\tSUM(t2.d25)+\n\tSUM(t2.d26)+\n\tSUM(t2.d27)+\n\tSUM(t2.d28)+\n\tSUM(t2.d29)+\n\tSUM(t2.d30)+\n\tSUM(t2.d31)\n\t)\tas 'Total:Int:80',\n\tSUM(t2.d1) as '1:Int:80',\n\tSUM(t2.d2) as '2:Int:80',\n\tSUM(t2.d3) as '3:Int:80',\n\tSUM(t2.d4) as '4:Int:80',\n\tSUM(t2.d5) as '5:Int:80',\n\tSUM(t2.d6) as '6:Int:80',\n\tSUM(t2.d7) as '7:Int:80',\n\tSUM(t2.d8) as '8:Int:80',\n\tSUM(t2.d9) as '9:Int:80',\n\tSUM(t2.d10) as '10:Int:80',\n\tSUM(t2.d11) as '11:Int:80',\n\tSUM(t2.d12) as '12:Int:80',\n\tSUM(t2.d13) as '13:Int:80',\n\tSUM(t2.d14) as '14:Int:80',\n\tSUM(t2.d15) as '15:Int:80',\n\tSUM(t2.d16) as '16:Int:80',\n\tSUM(t2.d17) as '17:Int:80',\n\tSUM(t2.d18) as '18:Int:80',\n\tSUM(t2.d19) as '19:Int:80',\n\tSUM(t2.d20) as '20:Int:80',\n\tSUM(t2.d21) as '21:Int:80',\n\tSUM(t2.d22) as '22:Int:80',\n\tSUM(t2.d23) as '23:Int:80',\n\tSUM(t2.d24) as '24:Int:80',\n\tSUM(t2.d25) as '25:Int:80',\n\tSUM(t2.d26) as '26:Int:80',\n\tSUM(t2.d27) as '27:Int:80',\n\tSUM(t2.d28) as '28:Int:80',\n\tSUM(t2.d29) as '29:Int:80',\n\tSUM(t2.d30) as '30:Int:80',\n\tSUM(t2.d31) as '31:Int:80'\nFROM\n(\n\tSELECT\n\t\tt1.customer AS customer,\n\t\tt1.item_code AS item_code,\n\t\tt1.item_name AS item_name,\n\t\t\"Actual Qty\" AS qty,\n\t\t0 AS d1,\n\t\t0 AS d2,\n\t\t0 AS d3,\n\t\t0 AS d4,\n\t\t0 AS d5,\n\t\t0 AS d6,\n\t\t0 AS d7,\n\t\t0 AS d8,\n\t\t0 AS d9,\n\t\t0 AS d10,\n\t\t0 AS d11,\n\t\t0 AS d12,\n\t\t0 AS d13,\n\t\t0 AS d14,\n\t\t0 AS d15,\n\t\t0 AS d16,\n\t\t0 AS d17,\n\t\t0 AS d18,\n\t\t0 AS d19,\n\t\t0 AS d20,\n\t\t0 AS d21,\n\t\t0 AS d22,\n\t\t0 AS d23,\n\t\t0 AS d24,\n\t\t0 AS d25,\n\t\t0 AS d26,\n\t\t0 AS d27,\n\t\t0 AS d28,\n\t\t0 AS d29,\n\t\t0 AS d30,\n\t\t0 AS d31\n\tFROM\n\t(\n\t\tSELECT\n\t\t\tode.customer AS customer,\n\t\t\tode.item_code AS item_code,\n\t\t\tode.item_name AS item_name\n\t\tFROM\n\t\t    `tabSales Invoice` odes left join\n\t\t\t`tabSales Invoice Item` ode \n\t\t\ton ode.parent = odes.name\n\t\tWHERE\n\t\t\tMONTH(ode.posting_date) = %(month)s AND \n\t\t\tYEAR(ode.posting_date) = %(year)s and \n\t\t\todes.is_return != 1\n\t\tGROUP BY\n\t\t\tode.item_code\n\n\t\tUNION\n\n\t\tSELECT\n\t\t\tode.customer AS customer,\n\t\t\tode.item_code AS item_code,\n\t\t\tode.item_name AS item_name\n\t\tFROM\n\t\t\t`tabSales Plan Ledger Entry` ode\n\t\tWHERE\n\t\t\tMONTH(ode.posting_date) = %(month)s AND \n\t\t\tYEAR(ode.posting_date) = %(year)s \n\t\tGROUP BY\n\t\t\tode.item_code\n\t) t1\n\tGROUP BY\n\t\tt1.item_code\n\n\tUNION\n\n\tSELECT\n\t\tt1.customer AS customer,\n\t\tt1.item_code AS item_code,\n\t\tt1.item_name AS item_code,\n\t\t\"Planned Qty\" AS qty,\n\t\t0 AS d1,\n\t\t0 AS d2,\n\t\t0 AS d3,\n\t\t0 AS d4,\n\t\t0 AS d5,\n\t\t0 AS d6,\n\t\t0 AS d7,\n\t\t0 AS d8,\n\t\t0 AS d9,\n\t\t0 AS d10,\n\t\t0 AS d11,\n\t\t0 AS d12,\n\t\t0 AS d13,\n\t\t0 AS d14,\n\t\t0 AS d15,\n\t\t0 AS d16,\n\t\t0 AS d17,\n\t\t0 AS d18,\n\t\t0 AS d19,\n\t\t0 AS d20,\n\t\t0 AS d21,\n\t\t0 AS d22,\n\t\t0 AS d23,\n\t\t0 AS d24,\n\t\t0 AS d25,\n\t\t0 AS d26,\n\t\t0 AS d27,\n\t\t0 AS d28,\n\t\t0 AS d29,\n\t\t0 AS d30,\n\t\t0 AS d31\n\tFROM\n\t(\n\t\tSELECT\n\t\t\tode.customer AS customer,\n\t\t\tode.item_code AS item_code,\n\t\t\tode.item_name AS item_name\n\t\tFROM\n\t\t\t`tabSales Invoice` odes left join\n\t\t\t`tabSales Invoice Item` ode \n\t\t\ton ode.parent = odes.name\n\t\tWHERE\n\t\t\tMONTH(ode.posting_date) = %(month)s AND \n\t\t\tYEAR(ode.posting_date) = %(year)s and\n\t\t\todes.is_return != 1\n\t\tGROUP BY\n\t\t\tode.item_code\n\n\t\tUNION\n\n\t\tSELECT\n\t\t\tode.customer AS customer,\n\t\t\tode.item_code AS item_code,\n\t\t\tode.item_name AS item_name\n\t\tFROM\n\t\t\t`tabSales Plan Ledger Entry` ode\n\t\tWHERE\n\t\t\tMONTH(ode.posting_date) = %(month)s AND \n\t\t\tYEAR(ode.posting_date) = %(year)s\n\t\tGROUP BY\n\t\t\tode.item_code\n\t) t1\n\tGROUP BY\n\t\tt1.item_code\n\t\n\tUNION\n\n\tSELECT \n\t\tode.customer as customer, \n\t\tode.item_code as item_code,  \n\t\tode.item_name as item_name,\n\t\t'Planned Qty' as qty,\n\t\tsum(case when day(ode.posting_date) = 1 then ode.qty else 0 end) as d1,\n\t\tsum(case when day(ode.posting_date) = 2 then ode.qty else 0 end) as d2,\n\t\tsum(case when day(ode.posting_date) = 3 then ode.qty else 0 end) as d3,\n\t\tsum(case when day(ode.posting_date) = 4 then ode.qty else 0 end) as d4,\n\t\tsum(case when day(ode.posting_date) = 5 then ode.qty else 0 end) as d5,\n\t\tsum(case when day(ode.posting_date) = 6 then ode.qty else 0 end) as d6,\n\t\tsum(case when day(ode.posting_date) = 7 then ode.qty else 0 end) as d7,\n\t\tsum(case when day(ode.posting_date) = 8 then ode.qty else 0 end) as d8,\n\t\tsum(case when day(ode.posting_date) = 9 then ode.qty else 0 end) as d9,\n\t\tsum(case when day(ode.posting_date) = 10 then ode.qty else 0 end) as d10,\n\t\tsum(case when day(ode.posting_date) = 11 then ode.qty else 0 end) as d11,\n\t\tsum(case when day(ode.posting_date) = 12 then ode.qty else 0 end) as d12,\n\t\tsum(case when day(ode.posting_date) = 13 then ode.qty else 0 end) as d13,\n\t\tsum(case when day(ode.posting_date) = 14 then ode.qty else 0 end) as d14,\n\t\tsum(case when day(ode.posting_date) = 15 then ode.qty else 0 end) as d15,\n\t\tsum(case when day(ode.posting_date) = 16 then ode.qty else 0 end) as d16,\n\t\tsum(case when day(ode.posting_date) = 17 then ode.qty else 0 end) as d17,\n\t\tsum(case when day(ode.posting_date) = 18 then ode.qty else 0 end) as d18,\n\t\tsum(case when day(ode.posting_date) = 19 then ode.qty else 0 end) as d19,\n\t\tsum(case when day(ode.posting_date) = 20 then ode.qty else 0 end) as d20,\n\t\tsum(case when day(ode.posting_date) = 21 then ode.qty else 0 end) as d21,\n\t\tsum(case when day(ode.posting_date) = 22 then ode.qty else 0 end) as d22,\n\t\tsum(case when day(ode.posting_date) = 23 then ode.qty else 0 end) as d23,\n\t\tsum(case when day(ode.posting_date) = 24 then ode.qty else 0 end) as d24,\n\t\tsum(case when day(ode.posting_date) = 25 then ode.qty else 0 end) as d25,\n\t\tsum(case when day(ode.posting_date) = 26 then ode.qty else 0 end) as d26,\n\t\tsum(case when day(ode.posting_date) = 27 then ode.qty else 0 end) as d27,\n\t\tsum(case when day(ode.posting_date) = 28 then ode.qty else 0 end) as d28,\n\t\tsum(case when day(ode.posting_date) = 29 then ode.qty else 0 end) as d29,\n\t\tsum(case when day(ode.posting_date) = 30 then ode.qty else 0 end) as d30,\n\t\tsum(case when day(ode.posting_date) = 31 then ode.qty else 0 end) as d31\n\tFROM\n\t\t`tabSales Plan Ledger Entry` ode\n\tWHERE\n\t\tDAY(ode.posting_date) in (1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31) AND \n\t\tMONTH(ode.posting_date) = %(month)s AND \n\t\tYEAR(ode.posting_date) = %(year)s\n\tGROUP BY\n\t\tode.item_code\n\t\t\t\t\t\t\t\t\t\n\tUNION\n\t\t\t\t\t\t\t\t\t\n\tSELECT\t\n\t\tode.customer as customer,\n\t\tode.nx_item_code as item_code,\n\t\tode.item_name as item_name,\n\t\t'Actual Qty' as qty,\n\t\tsum(case when day(ode.posting_date) = 1 then ode.qty else 0 end) as d1,\n\t\tsum(case when day(ode.posting_date) = 2 then ode.qty else 0 end) as d2,\n\t\tsum(case when day(ode.posting_date) = 3 then ode.qty else 0 end) as d3,\n\t\tsum(case when day(ode.posting_date) = 4 then ode.qty else 0 end) as d4,\n\t\tsum(case when day(ode.posting_date) = 5 then ode.qty else 0 end) as d5,\n\t\tsum(case when day(ode.posting_date) = 6 then ode.qty else 0 end) as d6,\n\t\tsum(case when day(ode.posting_date) = 7 then ode.qty else 0 end) as d7,\n\t\tsum(case when day(ode.posting_date) = 8 then ode.qty else 0 end) as d8,\n\t\tsum(case when day(ode.posting_date) = 9 then ode.qty else 0 end) as d9,\n\t\tsum(case when day(ode.posting_date) = 10 then ode.qty else 0 end) as d10,\n\t\tsum(case when day(ode.posting_date) = 11 then ode.qty else 0 end) as d11,\n\t\tsum(case when day(ode.posting_date) = 12 then ode.qty else 0 end) as d12,\n\t\tsum(case when day(ode.posting_date) = 13 then ode.qty else 0 end) as d13,\n\t\tsum(case when day(ode.posting_date) = 14 then ode.qty else 0 end) as d14,\n\t\tsum(case when day(ode.posting_date) = 15 then ode.qty else 0 end) as d15,\n\t\tsum(case when day(ode.posting_date) = 16 then ode.qty else 0 end) as d16,\n\t\tsum(case when day(ode.posting_date) = 17 then ode.qty else 0 end) as d17,\n\t\tsum(case when day(ode.posting_date) = 18 then ode.qty else 0 end) as d18,\n\t\tsum(case when day(ode.posting_date) = 19 then ode.qty else 0 end) as d19,\n\t\tsum(case when day(ode.posting_date) = 20 then ode.qty else 0 end) as d20,\n\t\tsum(case when day(ode.posting_date) = 21 then ode.qty else 0 end) as d21,\n\t\tsum(case when day(ode.posting_date) = 22 then ode.qty else 0 end) as d22,\n\t\tsum(case when day(ode.posting_date) = 23 then ode.qty else 0 end) as d23,\n\t\tsum(case when day(ode.posting_date) = 24 then ode.qty else 0 end) as d24,\n\t\tsum(case when day(ode.posting_date) = 25 then ode.qty else 0 end) as d25,\n\t\tsum(case when day(ode.posting_date) = 26 then ode.qty else 0 end) as d26,\n\t\tsum(case when day(ode.posting_date) = 27 then ode.qty else 0 end) as d27,\n\t\tsum(case when day(ode.posting_date) = 28 then ode.qty else 0 end) as d28,\n\t\tsum(case when day(ode.posting_date) = 29 then ode.qty else 0 end) as d29,\n\t\tsum(case when day(ode.posting_date) = 30 then ode.qty else 0 end) as d30,\n\t\tsum(case when day(ode.posting_date) = 31 then ode.qty else 0 end) as d31\n\tFROM\n\t\t`tabSales Invoice` odes left join\n\t\t`tabSales Invoice Item` ode \n\t\ton ode.parent = odes.name\n\tWHERE\n\t\tDAY(ode.posting_date) in (1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31) AND \n\t\tMONTH(ode.posting_date) = %(month)s AND \n\t\tYEAR(ode.posting_date) = %(year)s and\n\t\todes.is_return != 1\n\tGROUP BY\n\t\tode.item_code\n) t2\nGROUP BY\n\tt2.item_code, t2.qty\nORDER BY\n\tt2.customer ASC, t2.item_code ASC, t2.qty DESC",
 "ref_doctype": "Sales Invoice",
 "report_name": "Despatch Details Report",
 "report_type": "Query Report",
 "roles": []
}